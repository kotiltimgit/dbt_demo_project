version: 2

sources:
  - name: MATILLION
    database: DBT_DB_DEV
    schema: BRONZE
    tables:
      - name: MATILLION_SCHEDULES
        external:
          # For configuring below properties, refer this YAML: models/stages.yml
          load_config:
            stage: <stage_name>
            location_path: <relative_path>
            files: ['<file_name_1>', '<file_name_2>', ...]
            pattern: <regex_pattern>
            file_format: <file_format_name>
            columns:
              source_columns: all | ['<source_column_1>', '<source_column_2>', ...]
              target_columns: all | ['<target_column_1>', '<target_column_2>', ...]
            copy_options:
              on_error: CONTINUE | SKIP_FILE | SKIP_FILE_<num> | 'SKIP_FILE_<number>%' | ABORT_STATEMENT
              size_limit: <number>
              purge: true | false
              return_failed_only: true | false
              match_by_column_name: CASE_SENSITIVE | CASE_INSENSITIVE | NONE
              include_metadata:
                metadata_columns: ['<metadata_column_1>', '<metadata_column_2>', ...]
                target_columns: ['<target_column_1>', '<target_column_2>', ...]
              enforce_length: true | false
              truncatecolumns: true | false
              force: true | false
              load_uncertain_files: true | false
            validation_mode: RETURN_<number>_ROWS | RETURN_ERRORS | RETURN_ALL_ERRORS          
        columns:
          - name: NAME
            tests:
              - unique
              - not_null
          - name: JOBNAME
            tests:
              - not_null
          - name: HOUR
            tests:
              - not_null
          - name: MINUTE
            tests:
              - not_null
          - name: IGNOREMISFIRES
            tests:
              - accepted_values:
                  values: ['TRUE', 'FALSE']
  - name: DBT
    database: DBT_DB_DEV
    schema: BRONZE
    tables:
      - name: DBT_LISTRUNS
      - name: DBT_LISTJOBS